<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gw.sys.dao.UserRolesAndPerDao">

    <!--根据用户名和密码查询用户登录信息-->
    <select id="queryUserInfoByUserNameAndPwd" resultType="com.gw.entities.UserOfSys">
        select id,`name`,password,status from sys_user where `name` = #{userName}
    </select>

    <!--通过用户id查询用户角色id-->
    <select id="queryUserRoleIds" resultType="java.lang.Long">
        select role_id from sys_user_role
        where user_id = #{id}
    </select>

    <!--通过用户角色id查询用户角色名称-->
    <select id="queryUserRoleName" resultType="java.lang.String">
        select `name` from sys_role
        where id = #{id} and del_flag = 0
    </select>

    <!--通过用户角色id查询用户菜单id-->
    <select id="queryMenuIdByRoleId" resultType="java.lang.Long">
        select menu_id from sys_role_menu
        where role_id = #{id}
    </select>

</mapper>
